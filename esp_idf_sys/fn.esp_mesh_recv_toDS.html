<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@brief      Receive a packet targeted to external IP network - Root uses this API to receive packets destined to external IP network - Root forwards the received packets to the final destination via socket. - If no socket connection is ready to send out the received packets and this esp_mesh_recv_toDS() hasn’t been called by applications, packets from the whole mesh network will be pending in toDS queue."><title>esp_mesh_recv_toDS in esp_idf_sys - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-2fcac8296ac587d8.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="esp_idf_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (7820972f8 2023-06-10)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-48600a9606eff342.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../esp_idf_sys/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../esp_idf_sys/index.html"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In esp_idf_sys</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="index.html">esp_idf_sys</a>::<wbr><a class="fn" href="#">esp_mesh_recv_toDS</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/esp_idf_sys/home/runner/work/esp-idf-sys/esp-idf-sys/target/riscv32imc-esp-espidf/debug/build/esp-idf-sys-d0bd668f35bae45e/out/bindings.rs.html#29321-29329">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C&quot; fn esp_mesh_recv_toDS(
    from: *mut <a class="union" href="union.mesh_addr_t.html" title="union esp_idf_sys::mesh_addr_t">mesh_addr_t</a>,
    to: *mut <a class="union" href="union.mesh_addr_t.html" title="union esp_idf_sys::mesh_addr_t">mesh_addr_t</a>,
    data: *mut <a class="struct" href="struct.mesh_data_t.html" title="struct esp_idf_sys::mesh_data_t">mesh_data_t</a>,
    timeout_ms: c_int,
    flag: *mut c_int,
    opt: *mut <a class="struct" href="struct.mesh_opt_t.html" title="struct esp_idf_sys::mesh_opt_t">mesh_opt_t</a>,
    opt_count: c_int
) -&gt; <a class="type" href="type.esp_err_t.html" title="type esp_idf_sys::esp_err_t">esp_err_t</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@brief      Receive a packet targeted to external IP network
- Root uses this API to receive packets destined to external IP network
- Root forwards the received packets to the final destination via socket.
- If no socket connection is ready to send out the received packets and this esp_mesh_recv_toDS()
hasn’t been called by applications, packets from the whole mesh network will be pending in toDS queue.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>        Use esp_mesh_get_rx_pending() to check the number of packets available <span class="kw">in </span>the queue waiting
        to be received by applications <span class="kw">in </span>case of running out of memory <span class="kw">in </span>the root.

        Using esp_mesh_set_xon_qsize() users may configure the RX queue size, default:<span class="number">32. </span>If this size is too large,
        and esp_mesh_recv_toDS() isn<span class="lifetime">&#39;t </span>called <span class="kw">in </span>time, there is a risk that a great deal of memory is occupied
        by the pending packets. If this size is too small, it will impact the efficiency on upstream. How to
        decide this value depends on the specific application scenarios.</code></pre></div>
<p>@attention  This API is only called by the root.</p>
<p>@param[out] from  the address of the original source of the packet
@param[out] to  the address contains remote IP address and port (IPv4:PORT)
@param[out] data  pointer to the received packet
- Contain the protocol and applications should follow it to parse the data.
@param[in]  timeout_ms  wait time if a packet isn’t immediately available (0:no wait, portMAX_DELAY:wait forever)
@param[out] flag  bitmap for data received
- MESH_DATA_TODS represents the received data target to external IP network. Root shall forward this data to external IP network via the association with router.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>        flag could be MESH_DATA_TODS.</code></pre></div>
<p>@param[out] opt  options desired to receive
@param[in]  opt_count  option count desired to receive</p>
<p>@return</p>
<ul>
<li>ESP_OK</li>
<li>ESP_ERR_MESH_ARGUMENT</li>
<li>ESP_ERR_MESH_NOT_START</li>
<li>ESP_ERR_MESH_TIMEOUT</li>
<li>ESP_ERR_MESH_DISCARD</li>
<li>ESP_ERR_MESH_RECV_RELEASE</li>
</ul>
</div></details></section></div></main></body></html>